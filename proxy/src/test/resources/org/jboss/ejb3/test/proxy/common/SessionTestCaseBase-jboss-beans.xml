<deployment xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:jboss:bean-deployer:2.0 bean-deployer_2_0.xsd"
  xmlns="urn:jboss:bean-deployer:2.0">

  <!-- 
    
    JNDI 
    
    The requisite Naming Server
    
  -->
  <bean name="NameServer" class="org.jnp.server.SingletonNamingServer" />

  <!-- 
    
    JNDI Registrars
    
  -->

  <!-- SLSB JNDI Registrar -->
  <bean name="org.jboss.ejb3.JndiRegistrar.Session.SLSBJndiRegistrar"
    class="org.jboss.ejb3.proxy.jndiregistrar.JndiStatelessSessionRegistrar">
    <constructor>
      <parameter>
        org.jboss.ejb3.proxy.objectfactory.session.stateless.StatelessSessionProxyObjectFactory
      </parameter>
    </constructor>
    <depends>NameServer</depends>
  </bean>
  
  <!-- SFSB JNDI Registrar -->
  <bean name="org.jboss.ejb3.JndiRegistrar.Session.SFSBJndiRegistrar"
    class="org.jboss.ejb3.proxy.jndiregistrar.JndiStatefulSessionRegistrar">
    <constructor>
      <parameter>
        org.jboss.ejb3.proxy.objectfactory.session.stateful.StatefulSessionProxyObjectFactory
      </parameter>
    </constructor>
    <depends>NameServer</depends>
  </bean>
  
  <!-- @Service JNDI Registrar -->
  <bean name="org.jboss.ejb3.JndiRegistrar.ServiceJndiRegistrar"
    class="org.jboss.ejb3.proxy.jndiregistrar.JndiServiceRegistrar">
    <constructor>
      <parameter>
        org.jboss.ejb3.proxy.objectfactory.service.ServiceProxyObjectFactory
      </parameter>
    </constructor>
    <depends>NameServer</depends>
  </bean>

  <!-- 
    
    Remoting
    
  -->

  <!-- Remoting  Configuration -->
  <bean name="ServerConfiguration"
    class="org.jboss.remoting.ServerConfiguration">
    <property name="invocationHandlers">
      <map keyClass="java.lang.String" valueClass="java.lang.String">
        <entry>
          <key>AOP</key>
          <value>
            org.jboss.aspects.remoting.AOPRemotingInvocationHandler
          </value>
        </entry>
      </map>
    </property>
  </bean>

  <!-- Remoting Connector -->
  <bean name="org.jboss.ejb3.RemotingConnector"
    class="org.jboss.remoting.transport.Connector">
    <property name="invokerLocator">socket://0.0.0.0:3873</property>
    <property name="serverConfiguration">
      <inject bean="ServerConfiguration" />
    </property>
  </bean>

</deployment>