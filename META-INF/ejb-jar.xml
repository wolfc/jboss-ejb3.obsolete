<?xml version="1.0" encoding="UTF-8"?>
<ejb-jar
        xmlns="http://java.sun.com/xml/ns/javaee"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                            http://java.sun.com/xml/ns/javaee/ejb-jar_3_0.xsd"
        version="3.0">
	<description>Partial deployment descriptors for EJB in JBoss</description>
   	<display-name>Partial deployment descriptors</display-name>
   	<enterprise-beans>
      <session>
         <ejb-name>CompleteXMLDD</ejb-name>
         <business-remote>org.jboss.tutorial.partial_deployment_descriptor.bean.CompleteXMLDD</business-remote>
         <ejb-class>org.jboss.tutorial.partial_deployment_descriptor.bean.CompleteXMLDDBean</ejb-class>
         <session-type>Stateless</session-type>
         <transaction-type>Container</transaction-type>
         <ejb-ref>
            <ejb-ref-name>ejb/PartialXMLDD</ejb-ref-name>
            <ejb-ref-type>Session</ejb-ref-type>
            <mapped-name>PartialXMLDD/remote</mapped-name>
            <injection-target>
             	<injection-target-class>org.jboss.tutorial.partial_deployment_descriptor.bean.CompleteXMLDDBean</injection-target-class>
             	<injection-target-name>partialXMLDDBean</injection-target-name>
             </injection-target>
         </ejb-ref>
         <resource-ref>
             <res-ref-name>TimerService</res-ref-name>
             <res-type>javax.ejb.TimerService</res-type>
             <res-auth>Container</res-auth>
             <res-sharing-scope>Shareable</res-sharing-scope>
             <injection-target>
             	<injection-target-class>org.jboss.tutorial.partial_deployment_descriptor.bean.CompleteXMLDDBean</injection-target-class>
             	<injection-target-name>timerService</injection-target-name>
             </injection-target>
         </resource-ref>
         <post-construct>
         	<lifecycle-callback-class>org.jboss.tutorial.partial_deployment_descriptor.bean.ExternalCallbackListener</lifecycle-callback-class>
         	<lifecycle-callback-method>postConstruct</lifecycle-callback-method>
         </post-construct>
         
         <security-identity>
            <run-as>
               <role-name>admin</role-name>
            </run-as>
         </security-identity>
      </session>
      <session>
         <ejb-name>PartialXMLDD</ejb-name>
         <business-remote>org.jboss.tutorial.partial_deployment_descriptor.bean.PartialXMLDD</business-remote>
         <ejb-class>org.jboss.tutorial.partial_deployment_descriptor.bean.PartialXMLDDBean</ejb-class>
         <session-type>Stateful</session-type>
         <init-method>
         	<create-method>
         		<method-name>create</method-name>
         	</create-method>
         	<bean-method>
         		<method-name>init</method-name>
         	</bean-method>
         </init-method>
         <remove-method>
         	<bean-method>
         		<method-name>remove</method-name>
         	</bean-method>
         </remove-method>
         <transaction-type>Container</transaction-type>
         
         <env-entry>
            <env-entry-name>id</env-entry-name>
            <env-entry-type>java.lang.String</env-entry-type>
            <env-entry-value>5678</env-entry-value>
         </env-entry>
         <resource-ref>
            <res-ref-name>DefaultDS</res-ref-name>
            <res-type>javax.sql.DataSource</res-type>
            <res-auth>Container</res-auth>
            <res-sharing-scope>Shareable</res-sharing-scope>
            <injection-target>
            	<injection-target-class>org.jboss.tutorial.partial_deployment_descriptor.bean.PartialXMLDDBean</injection-target-class>
            	<injection-target-name>ds</injection-target-name>
            </injection-target>
         </resource-ref>
      </session>
   </enterprise-beans>
   <interceptors>
   	<interceptor>
   		<interceptor-class>org.jboss.tutorial.partial_deployment_descriptor.bean.FirstInterceptor</interceptor-class>
   		<around-invoke>
   			<method-name>interceptorMethod</method-name>
   		</around-invoke>
   	</interceptor>
   	<interceptor>
   		<interceptor-class>org.jboss.tutorial.partial_deployment_descriptor.bean.SecondInterceptor</interceptor-class>
   	</interceptor>
   </interceptors>
   <assembly-descriptor>
   	  <security-role>
         <role-name>admin</role-name>
      </security-role>
      <security-role>
         <role-name>normal</role-name>
      </security-role>
      <method-permission>
         <role-name>normal</role-name>
         <method>
            <ejb-name>CompleteXMLDD</ejb-name>
            <method-name>sayHello</method-name>
         </method>
      </method-permission>
      <method-permission>
         <unchecked/>
         <method>
            <ejb-name>CompleteXMLDD</ejb-name>
            <method-name>sayBye</method-name>
         </method>
      </method-permission>
      <method-permission>
         <role-name>admin</role-name>
         <method>
            <ejb-name>PartialXMLDD</ejb-name>
            <method-name>echoMessage</method-name>
         </method>
         <method>
            <ejb-name>PartialXMLDD</ejb-name>
            <method-name>changeMessage</method-name>
         </method>
      </method-permission>
      <container-transaction>
         <method>
            <ejb-name>CompleteXMLDD</ejb-name>
            <method-name>greetWithNotSupportedTransaction</method-name>
         </method>
         <trans-attribute>NotSupported</trans-attribute>
      </container-transaction>
      <container-transaction>
         <method>
            <ejb-name>CompleteXMLDD</ejb-name>
            <method-name>greetWithRequiredTransaction</method-name>
            <method-params>
               <method-param>java.lang.String</method-param>
            </method-params>
         </method>
         <trans-attribute>Required</trans-attribute>
      </container-transaction>
      <interceptor-binding>
      	<ejb-name>CompleteXMLDD</ejb-name>
      	<interceptor-class>org.jboss.tutorial.partial_deployment_descriptor.bean.FirstInterceptor</interceptor-class>
      	<interceptor-class>org.jboss.tutorial.partial_deployment_descriptor.bean.SecondInterceptor</interceptor-class>
   	  </interceptor-binding>
      <exclude-list>
         <method>
            <ejb-name>CompleteXMLDD</ejb-name>
            <method-name>uncallableMethod</method-name>
         </method>
      </exclude-list>
      
      
   </assembly-descriptor>
	
        
</ejb-jar>